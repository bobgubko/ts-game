# Опыт написания игры на TypeScript и WebGL или сказ о том, как backend-щик в современный frontend окунулся

Доброго времени суток всем хаброжителям. Хочу рассказать вам о том, как я вернулся в любительский геймдев спустя 3+ года, кардинально сменив инструмент (а попутно — и свое мировоззрение), и что из этого вышло. Под катом вас ждет:

1. Краткая диспозиция всех фактов в начале пути. Ну, знаете, как картинка "ДО" в дешёвой интернет-рекламе "ДО" и "ПОСЛЕ".
1. Добровольный нырок в современный frontend в стиле "Где деньги, Лебовски?!"
1. Легкий зуд в интимной точке, переходящий в жгучее желание изучить что-то новое, сделав что-нибудь старое.
1. Осознание собственной беспомощности
1. Преодоление
1. Приятное окончание, ну совсем как в этих ваших фильмах.

>>>habra cut

## Гражданин, представьтесь!
В своей предыдущей статье (https://habrahabr.ru/post/244417/) я немного писал о себе, а точнее о том, как связан я и геймдев. Де юро — никак, де факто — пишу игры и движки для удовольствия и участия в теплых и ламповых конкурсах. С тех пор мало что изменилось.

Для дальнейшего повествования и нагнетения необходимой атмосферы важно то, что на момент начала этого сказа я являюсь профессиональным .net backend developer, который умеет в html5, css3 и ... jquery. Для укрепления неожиданного «вот это поворот»-а добавим, что имеется недоверие и брезгливость к JavaScript, приправленная откровенным непониманием всего этого хайпа вокруг языка и набором шуток про типизацию, ускоренное устаревание фреймворков, number+string-неожиданностей и прочим. Знаете, такой вполне стандартный, джентльменский набор разработчика, использующего более взрослый и устоявшийся язык (эй, я знаю, что платформа .net моложе js, но "взрослый" не в прямом смысле).

## Пройдемте!
Сентябрь 2017. Я вышел на новую теплую и ламповую работу со свежим стеком технологий (.net core web api + angular) и моей задачей был только бекенд. Слово Angular звучало для меня ругательно, npm и nodejs прочно ассоциировались со смузи и гироскутером. Тимлид, видя это и относясь с пониманием, провел мне короткий курс о том, как запускать все это шайтанство. Ну, вы знаете, как в том анекдоте про чукчу и собак в космосе? Я запоминаю нужные для запуска bat-ники (запоминание npm run start я посчитал крайне излишним для своей нежной натуры), и погружаюсь в теплый и ~~ламповый~~ светодиодный net core.

Октябрь 2017. Первый звоночек. Тимлид говорит, что наш фронтедщик зашивается на 4-х проектах сразу и предлагает впилить какой-то там раздел в админке мне. Мотивируя, что, мол, там несложно, просто повтори как сделано для сущности N, только теперь для M. Под смешки коллег, убегающих за гироскутером и вейпом для меня, наспех прочитав какой-то короткий ликбез по Angular, путем копипаста и везения, я рожаю какой-то раздел, который, с оговорками, работает. Тимлид доволен, я в шоке, и вот вроде бы и задачки по бекенду на доске появились...

Но нет. Бекендщиков много, задач для них уже мало, а на фронте — непаханное поле. Новая задача, уже непосредственно на портале, заставляет меня взяться за задачу всерьез, коллеги норовят подвернуть мне штаны и отвести в барбершоп, а я на недельку погружаюсь в чтение материалов по Angular, TypeScript, npm, webpack и прочее. Кстати, отлично помогла статья про современный Javascript для динозавров — https://habrahabr.ru/company/mailru/blog/340922/. 

Спустя некоторое время я смог начать закрывать несложные фронтенд-задачи, чувствуя себя как привратник в отсутствие горничной. Все еще посмеиваясь над шутками про фронтенд я предлагаю коллегам-бекендщикам собраться и послушать мой бананово-клубничный опыт. Все смеются, но в тайне каждому хочется понять, что за бурление в этом стремительном фронтенде происходит.

Я, немудрствуя лукаво, по сути пересказываю вышеупомянутуюу статью с хабра, приправляя ее своими базовыми знаниями по Angular. Митап заходит на ура, и впоследствии я провожу целую серию по фронтенду для бекендщиков, что, впрочем, уже не так важно для нашего сказа.

## Зуд
Пора перейти к виновнику последующего зуда — TypeScript.

Мне, как человеку, познавшему боль с callback hell, var self = this, bind(this), udefined is not a function, TypeScript показался... нет, даже не глотком свежего воздуха. Эдаким вошлебником на голубом звездолете, который, жуя типизированную сигару, лениво бросил мне — сынок, забудь все, что ты знал о js раньше. Классы, интерфейсы, типизация, promise, отлавливаемые при компиляции ошибки и опечатки, автодополнения в коде, понятное поведение let вместо обескураживающего поведения var. Конечно, спустя время, я осознал, что спонсором большей части этого счастья является вовсе не TypeScript, а сам JavaScript, в его современной редакции (es6+).
