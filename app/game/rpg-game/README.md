# IGDC 159 RPG Game Contest

## Концепция
Двумерная космическая РПГ. Вид сверху. Игрок управляет кораблем с помощью мышки и летает в пределах солнечной системы. Объекты для взаимодействия:
* Планеты - можно приземлиться, чтобы поторговать/починиться/получить задание/сдать задание - переход на экран "Планета"
* Дружественные корабли - ничего не делают?
* Вражеские корабли - при сближении происходит переход к экрану "Бой"
* Обломки-сундуки - при сближении происходит переход к экрану "Сбор сокровищ"

Цель игры - набрать достаточное количество кредитов, чтобы купить гипердвигатель для корабля и улететь в столичную солнечную систему.

## Экран "Бой"
Бой происходит на отдельном экране, пошагово. С каждой стороны экрана представлены корабли игрока и врага, разделенные на отсеки. 

Каждый ход игрок выбирает N отсеков врага, которые будет атаковать и M отсеков своего корабля, которые будут защищены щитом. Противник делает то же самое, но его выбор для игрока неизвестен.

После окончания выбора целей для атаки и защиты происходит процесс выполнения приказов - игрок стреляет в выбранные цели врага и покрывает щитом свои цели. Вражеский корабль делает то же самое.

В каждый выбранный для атаки отсек производится выстрел, 
`Health = Health - (Random(DamageMin, DamageMax) * CriticalMultiplier * ShieldMultiplier)`  
где `Health` - текущее здоровье корабля,   
`DamageMin, DamageMax` - величина урона орудия,   
`CriticalMultiplier` - равен `2`, если сработал шанс на критический урон, иначе `1`   
`ShieldMultiplier` - коэффициент щита. Равен `0`, если данный отсек не был закрыт щитом и `0-0.9`, если был. Конкретная величина зависит от характеристик игрока/врага.

Игрок *(и враг?)* может использовать одноразовые предметы. Подробнее смотри в пункте **"Предметы"**

Если уровень здоровья одного из кораблей падает до нуля, то бой считается оконченным. Если в результате последнего хода, оба корабля оказались сбиты, то игрок все равно считается проигравшим.

Если победил игрок, происходит переход к экрану "Окончание боя".  
Если победил враг, то происходит возрождение игрока на начальной планете со штрафом - теряется `30%` кредитов.

## Экран "Окончание боя"
После успешного окончания боя игрок переходит на данный экран, где выводится информация о том, что игрок получает за бой:
* Опыт - зависит от уровня побежденного врага, *(количество потерь?)*
* Кредиты - универсальная валюта
* Рандомное количество предметов

## Экран "Планета"
При сближении с планетой игрок может сесть на нее. Происходит переход на экран "Планета".
На экране присутствуют:
* Характеристики игрока - информация
* Слоты корабля - интерактивные элементы, определяющие основные его характеристики. МОжно ставить/снимать предметы в слотах
* Кнопка "Починить корабль" - доступна, если корабль имеет неполное здоровье
* Кнопка "Взлететь" - происходит переход к экрану "Солнечная система"
* Инвентарь игрока - можно ставить предметы из инвентаря в корабль и обратно, можно продавать в магазин
* Инвентарь магазина - можно покупать и продавать предметы в магазин

Доступные действия:
* Починка - за кредиты
* Купить - покупает выбранную в инвентаре магазина вещь
* Продать - продает выбранную в инвентаре игрока вещь
* Установить - устанавливает выбранную в инвентаре игрока вещь в свободную ячейку корабля
* Снять - снимает вещь из выбранной ячейка корабля и кладет в свободную ячейку инвентаря игрока

## Экран "Сбор сокровищ"
TODO

## Характеристики игрока
* Опыт `Exp`
* Количество отсеков для атаки `N` - зависит от количества "надетых" генераторов щита
* Количество отсеков для защиты `M` - зависит от количества "надетых" орудий
* Сила орудий `Damage` - суммарный урон (мин - макс) от всех орудий
* Сила щита `Shield`
* Харизма `Charisma`
* Кредиты `Credits`
* Общее здоровье корабля `FullHealth`

### Опыт
В процессе игры игрок получает опыт.

При достижении определенного количества опыта игрок повышает свой уровень и получает очки навыков.

Куда можно потратить очки навыков:
* Сила урона
* Сила щита
* Харизма

### Количество отсеков для атаки `N`
Изнальное количество - `2`.
Улучшение `+1` за каждые `3` очка навыка

### Количество отсеков для защиты `M`
Изнальное количество - `2`.
Улучшение `+1` за каждые `3` очка навыка

### Сила орудий
Изначальное значение - `10`   
Улучшение - `+1` за каждое `1` очко навыка. Текст улучшения: 

*Главный корабельный оружейник Гаррус провел калибровку орудий, и теперь они стреляют чуточку мощнее.*

### Сила щита
Изначальное значение - `0.3`.  
Улучшение - `+0.2` за каждое `1` очко навыка. Текст улучшения: ---

### Харизма
Изначальное значение `1`  
Улучшение - `+1` за каждое `1` очко навыка.

Лучше цены на планете, лучше награда за квесты, возможность принудить противника сдаться без боя.

### Кредиты

* Позволяют чинить корабль
* Являются целью игры

### Общее здоровье корабля
Количество выдерживаемых попаданий

## Фичекат
* Двигатель
* Харизма
* Поднятие уровня дает не очки навыков, а возможность качнуть на выбор одну из рандомно определенных характеристик: здоровье, крит.шанс, харизма, крит.множитель

## TODO
* Планета - цена продажи и покупки зависит от харизмы
* Планета - расширить иконку выбранной ячейки и иконку предмета для ячеек корабля
* Планета - рисовать опыт
* Общее - нарисовать иконки расходуемых предметов
* Общее - нарисовать корабль
* Общее - добавить опыт
* **Общее - звуки**
* Бой - добавить снаряды, летящие от корабля к кораблю во время выстрела
* Бой - добавить расстановку ячеек исходя из типа корабля (добавить тип корабля в статы)
* **Бой - переход к экрану победы/поражения**
* Бой - начисление опыта(?)
* Бой - изменение статов игрока при применении одноразовых предметов
* Солнечная система - посадка на планету
* Солнечная система - движение камеры
* Солнечная система - другие корабли
* Солнечная система - радар или иные способы целеуказания для планет и врагов
* Сбор сокровищ - добавить генерацию опыта(?)
* Сбор сокровищ - добавление вещей в инвентарь игрока
* Сбор сокровищ - добавление в инвентарь - стак одноразовых предметов

## DONE
* ~~Планета - ячейки корабля имеют предметы~~
* ~~Планета - предметы из ячеек корабля можно снимать и ставить~~
* ~~Планета - можно покупать и продавать предметы~~
* ~~Планета - манипуляции с предметами отражаются в `playerData`~~
* ~~Планета - вывод статов для оружия, щитов и двигателя в itemDescription~~
* ~~Планета - обновление статов корабля при изменении содержимого ячеек корабля~~
* ~~Планета - можно взлетать - переход к основному экрану~~
* ~~Бой - добавить разный урон для каждого из орудий~~
* ~~Бой - При атаке добавить вылетающее число урона~~
* ~~Бой - Добавить использование предметов~~
* ~~**Бой - отображение в ячейках корабля предметов**~~
* ~~Бой - добавить вывод статов каждого корабля~~
* ~~**Бой - нормальная расстановка расходников**~~
* ~~Бой - добавить ограничение на использование предметов - до выбора первой цели для защиты~~
* ~~Бой - раскрашивать ячейку корабля в зависимости от "цвета" предмета~~
* ~~Планета - раскрашивать ячейку корабля в зависимости от "цвета" предмета~~
* ~~Общее - HealthBar имеет цифру здоровья~~
* ~~Общее - нарисовать иконку двигателя~~
* ~~Общее - ячейки корабля имеют смысл. На корабле необходим двигатель~~  
* ~~**Общее - генератор предметов**~~
* ~~Сбор сокровищ - проверить генерацию всех типов вещей~~
* ~~Сбор сокровищ - случайные типы вещей~~
